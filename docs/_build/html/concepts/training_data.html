

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Training Data Format &mdash; Comet v1.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/modify.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/logo.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Comet’s components!" href="components/index.html" />
    <link rel="prev" title="Configuration" href="configuration.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/introduction.html">An introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/motivation.html">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/motivation.html#scope">Scope</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/motivation.html#task-oriented-dialog-systems">Task-oriented dialog systems</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/play_around.html">Play Around</a></li>
</ul>
<p class="caption"><span class="caption-text">Step By Step Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/00_overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/01_define_the_hierarchy.html">Step 1: Define domain, ontology, database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/02_custom_the_dialogue_state.html">Step 2: Custom the Dialogue State (Optional)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/03_custom_the_state_featurizer.html">Step 3: Custom the State Featurizer (Optional)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/04_custom_dialogue_state_tracker.html">Step 4: Custom the Dialogue State Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/05_define_a_hancraft_policy.html">Step 5: Build a Warm-up Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/06_build_natatural_language_template.html">Step 6: Build a Natural Language Template</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/07_build_user_simulator.html">Step 7: Build the User Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/08_connect_all_components_by_config.html">Step 8: Connect all components by Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/09_generate_training_data.html">Step 9: Prepare Training Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/10_deploy_and_train_models.html">Step 10: Train and deploy models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../step_by_step/Summarize.html">Summarize</a></li>
</ul>
<p class="caption"><span class="caption-text">Concepts</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="domain.html">Domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="domain.html#ontology">Ontology</a></li>
<li class="toctree-l1"><a class="reference internal" href="domain.html#database">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Training Data Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#nlu-training-data">NLU training data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supervised-policy-training-data">Supervised policy training data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#manual-preparing">Manual preparing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generate-by-interact-between-agent-and-user-simulator">Generate by interact between agent and user simulator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="components/index.html">Comet’s components!</a></li>
<li class="toctree-l1"><a class="reference internal" href="Reinforcement_learning.html">Reinforcement Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="chanel_connector.html">Channel Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="Architecture.html">Architecture</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../comet/comet.html">comet package</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Comet</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Training Data Format</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/concepts/training_data.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="training-data-format">
<span id="id1"></span><h1>Training Data Format<a class="headerlink" href="#training-data-format" title="Permalink to this headline">¶</a></h1>
<p>This page provides an overview of the different types of training data that go into a comet platform
and how this training data is structured.</p>
<div class="section" id="nlu-training-data">
<span id="id2"></span><h2>NLU training data<a class="headerlink" href="#nlu-training-data" title="Permalink to this headline">¶</a></h2>
<p>NLU training data stores structured information about user messages.</p>
<p>The goal of NLU (Natural Language Understanding) is to extract structured information from user messages.
This usually includes the user’s intent and any entities their message contains. You can add extra
information such as regular expressions and lookup tables to your training data to help the model
identify intents and entities correctly.</p>
<p>NLU data’s training format we construct based on <a class="reference external" href="https://nlp.pages.gitlab.ftech.ai/research/denver_core/index.html">Denver core</a>
Below is it’s format as <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file</p>
<div class="highlight-csv notranslate"><div class="highlight"><pre><span></span>text,intent,tag
hi,greet,O
hello,greet,O
bye,bye,O
bye bye,bye,O O
are you bot?,ask_is_bot,O O O
are u bot?,ask_is_bot,O O O
are u bot,ask_is_bot,O O O
thanks,thanks,O
thank,thanks,O
thank you,thanks,O
thank you so much,thanks,O
what is the weather in day 1/1,request#weather,O O O O O O B-inform#date
</pre></div>
</div>
</div>
<div class="section" id="supervised-policy-training-data">
<span id="id3"></span><h2>Supervised policy training data<a class="headerlink" href="#supervised-policy-training-data" title="Permalink to this headline">¶</a></h2>
<p>The data training format for policy we use as <code class="docutils literal notranslate"><span class="pre">record</span> <span class="pre">format</span></code> which is a <code class="docutils literal notranslate"><span class="pre">object</span></code>. We can show as:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
<span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;the state from which action was taken&quot;</span><span class="p">,</span>
<span class="nt">&quot;new_state&quot;</span><span class="p">:</span> <span class="s2">&quot;the resulting state after action was taken&quot;</span><span class="p">,</span>
<span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;the action taken from state&quot;</span>
<span class="p">],</span>
<span class="nt">&quot;reward&quot;</span><span class="p">:</span> <span class="s2">&quot;the reward received after taking action from state&quot;</span><span class="p">,</span>
<span class="nt">&quot;usr_transcripts&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;system_transcripts&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello , How may I help you?&quot;</span><span class="p">,</span>
<span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;task_success&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;cumulative_reward&quot;</span><span class="p">:</span> <span class="mi">-1</span><span class="p">,</span>
<span class="nt">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
<span class="nt">&quot;custom&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>Above is an object’s format. We can feed the <code class="docutils literal notranslate"><span class="pre">raw</span> <span class="pre">conversation</span></code> or <code class="docutils literal notranslate"><span class="pre">record</span> <span class="pre">format</span></code>. Based on
what you feed to, the system will convert <code class="docutils literal notranslate"><span class="pre">training</span> <span class="pre">data</span></code> to <code class="docutils literal notranslate"><span class="pre">record</span> <span class="pre">format</span></code>  to train the policy.</p>
<p>There are two way to prepare data training: <code class="docutils literal notranslate"><span class="pre">manual</span></code> or using <code class="docutils literal notranslate"><span class="pre">user</span> <span class="pre">simulator</span></code></p>
<div class="section" id="manual-preparing">
<h3>Manual preparing<a class="headerlink" href="#manual-preparing" title="Permalink to this headline">¶</a></h3>
<p>To manual preparing data format for policy training. We have to label the conversation following
format as a <code class="docutils literal notranslate"><span class="pre">.json</span></code> file:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="p">{</span>
    <span class="nt">&quot;dialogue_idx&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;turns&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;turn_idx&quot;</span><span class="p">:</span> <span class="mi">-1</span><span class="p">,</span>
            <span class="nt">&quot;usr_semantics&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;slots&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;slot2&quot;</span><span class="p">:</span> <span class="s2">&quot;value1&quot;</span><span class="p">},</span>
                    <span class="nt">&quot;act&quot;</span><span class="p">:</span> <span class="s2">&quot;inform&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">&quot;usr_transcript&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="nt">&quot;system_transcript&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="nt">&quot;system_semantics&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="nt">&quot;db_result&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span>
        <span class="p">{}</span>
    <span class="p">],</span>
<span class="p">},</span>
<span class="p">{}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="generate-by-interact-between-agent-and-user-simulator">
<h3>Generate by interact between agent and user simulator<a class="headerlink" href="#generate-by-interact-between-agent-and-user-simulator" title="Permalink to this headline">¶</a></h3>
<p>To use this way, we need to have a <code class="docutils literal notranslate"><span class="pre">User</span> <span class="pre">simulator</span></code> and Agent’s <code class="docutils literal notranslate"><span class="pre">Handcraft</span> <span class="pre">policy</span></code>.</p>
<p>For more make sense in the way to generate data by simulation. We should play around with <code class="docutils literal notranslate"><span class="pre">BabeShop</span></code>
domain that we are implemented.</p>
<p>See this section to know how to run <code class="docutils literal notranslate"><span class="pre">BabeShop</span></code>’s domain and then run commandline bellow to run simulation</p>
<p>In folder <code class="docutils literal notranslate"><span class="pre">assets/BabeShop/v0.2.0/records</span></code> you will something like this.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>assets
└── BabeShop
    └── v0.2.0
        └── records
            ├── train_supervised_dialogues.json
            └── train_supervised_dialogues.pkl
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="components/index.html" class="btn btn-neutral float-right" title="Comet’s components!" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="configuration.html" class="btn btn-neutral float-left" title="Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, NLP Team, Ftech.AI

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>